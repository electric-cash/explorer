div(class="table-responsive")
	table(class="table mb-0 blocks-table")
		thead
			tr
				//th
				th(class="data-header") Height
				th(class="data-header") Timestamp (utc)
				th(class="data-header text-right") Age
				th(class="data-header") Miner
				th(class="data-header text-right") Transactions
				th(class="data-header text-right") Average Fee
				th(class="data-header text-right") Size (bytes)

				if (blocks && blocks.length > 0 && blocks[0].weight)
					th(class="data-header text-right") Weight (wu)
		tbody
			each block, blockIndex in blocks
				if (block)
					tr
						td(class="data-cell")
							a(href=("/block-height/" + block.height), data-test-id="block" + block.blockIndex) #{block.height.toLocaleString()}

						td(class="data-cell") #{moment.utc(new Date(parseInt(block.time) * 1000)).format("Y-MM-DD HH:mm:ss")}

						- var timeAgo = moment.duration(moment.utc(new Date()).diff(moment.utc(new Date(parseInt(block.time) * 1000))));
						td(class="data-cell text-right") #{timeAgo.format()}
						td(class="data-cell")
							if (block.miner && block.miner.name)
								span(data-toggle="tooltip", title=("Identified by: " + block.miner.identifiedBy), style="display: inline-block;", class="rounded bg-primary text-white miner-label") #{block.miner.name}
							else
								span ?

						
						td(class="data-cell text-right") #{block.tx.length.toLocaleString()}

						td(class="data-cell text-right")
							- var currencyValue = new Decimal(block.totalFees).dividedBy(block.tx.length);
							include ./value-display.pug
							
						td(class="data-cell text-right") #{block.size.toLocaleString()}

						if (blocks && blocks.length > 0 && blocks[0].weight)
							td(class="data-cell text-right")
								- var fullPercent = new Decimal(100 * block.weight / coinConfig.maxBlockWeight).toDecimalPlaces(1);

								span #{block.weight.toLocaleString()} 
								small(class="font-weight-light text-muted") (#{fullPercent}%)

								div(class="progress", style="height: 4px;")
									div(class="progress-bar", role="progressbar", style=("width: " + fullPercent + "%;"), aria-valuenow=parseInt(100 * block.weight / coinConfig.maxBlockWeight), aria-valuemin="0" ,aria-valuemax="100")