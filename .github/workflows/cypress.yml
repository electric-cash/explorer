name: "Cypress Tests"

on:
  pull_request:
    types:
      - opened
      - synchronize
  push:

jobs:
  test:
    name: Cypress run
    runs-on: ubuntu-16.04
    strategy:
      # when one test fails, DO NOT cancel the other
      # containers, because this will kill Cypress processes
      # leaving the Dashboard hanging ...
      # https://github.com/cypress-io/github-action/issues/48
      fail-fast: false
      matrix:
        config: [ mainnet, testnet ]
    steps:
      - name: Setup Node
        uses: actions/setup-node@v1
        with:
          node-version: 12
      - run: node -v
      - name: Checkout
        uses: actions/checkout@v1
      - name: Cypress run
        uses: cypress-io/github-action@v1
        with:
          record: false
          command: npm run test:cy -- --env configFile=${{ matrix.config }}

